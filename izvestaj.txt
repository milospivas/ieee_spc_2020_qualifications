
IEEE Signal Processing Cup 2020 Kvalifikacije
Definisanje problema
    Dato je 5 normalnih i 5 abnormalnih snimaka merenja.
    Zadatak je da se implementiraju modeli koji će na osnovu merenja iz .bag fajlova dati predikciju da li je snimak normal/abnormal.
    Zatim predikcije uporediti sa pravom klasom kojoj snimak pripada i na taj način odrediti tačnost modela.

Vizualizacija:
    Iz izvučenih videa se vidi da snimci potiču sa neke bespilotne letilice,
    gde su normalni snimci snimljeni pri stabilnom letu bez mnogo pomeranja,
    dok su abnormalni snimljeni pri izrazito nestabilnom letu.

Predanaliza:
    U svakom snimku ima stotinak merenja, ali zadatak nije klasifikacija merenja nego klasifikacija snimaka.
    => Ne možemo da koristimo klasičnu klasifikaciju jer nemamo labele za sama merenja.

    Usvajamo sledeće pretpostavke:
        Normalni snimak ne sadrži abnormalna merenja.
        Abnormalni snimak sadrži neka abnormalna merenja.
        Obeležja su nezavisna.

    Model:
        - Usvajamo da Gauss-ovu raspodelu 
        - Transformišemo podatke ako nisu Gauss-ovski
        - Kako su obeležja nezavisna p(x) = p(x(1)) * p(x(2)) * ... * p(x(n))
        - Fitujemo parametre za Gauss-ovu raspodelu: vektore mu i sigma na trening skupu.
        - Klasifikujemo merenje x kao abnormalno ako je p(x) < Epsilon
        - Pri klasifikaciji, klasifikujemo snimak kao abnormalan ako sadrži više od Alfa (uzastopnih?) abnormalnih merenja

    Pošto podatke treba podeliti na trening, CV i test skupove, imamo:
        Trening skup:   3 normalna snimka, 0 abnormalnih    za fitovanje raspodela
        CV skup:        1 normalni snimak, 2 abnormalna     za podešavanje parametra Epsilon i Alfa
        Test skup:      1 normalni snimak, 3 abnormalna     za konačnu evaluaciju modela

    Za evaluaciju klasifikacije koristimo F_1 skor.
    Pošto je u test skupu normalna klasa u manjini, proglašavamo nju za pozitivnu klasu.
        TP - #true positive
        FP - #false positive
        FN - #false negative
    precision:
        P = TP/(TP + FP)
    recall:
        R = TP/(TP + FN)
    F_1 skor:
        F_1 = 2*P*R/(P + R)

Analiza merenja.
    => Zanemariti predanalizu gore.

    Na osnovu analize merenja:
        /mavros/global_position/local 
        /mavros/imu/data
        /mavros/imu/mag
        /mavros/global_position/compass_hdg
    dolazi se do zaključka da je su oscilacije određenih merenja, kod abnormalnih snimaka značajno veće nego kod normalnih.
    To znači da izvodi tih veličina dostižu veće apsolutne vrednosti kod abnormalnih snimaka,
    što znači da su varijanse tih merenja veće nego kod normalnih pa se mogu koristiti kao obeležja za klasičnu klasifikaciju.

    Veličine koje zadovoljavaju gornji opis su ugaona orijentacija, linearna brzina, jačina magnetskog polja i smer kompasa.
    Njihovi izvodi su ugaona brzina i linerno ubrzanje (već dostupni sa IMU-a), izvodi magnetskog polja i smera kompasa (izračunati iz merenja),
    u kodu označeni kao:
    "IMUAngularVelocity", "IMULinearAcceleration", "MagneticFieldDerivative", "compassHdgDerivative"
    Prve tri veličine su trodimenzione, četvrta je skalarna, tako da su vektori prediktora 10D.

Klasifikacija
    Na osnovu ovih podataka, formira se matrica podataka X, sa dodatom kolonom labela y.
    Matlab classificationLearner
    Korišćen je PCA koji zadržava 99% varijanse sa 2 prediktora
    Dobijeno je više modela sa 100% tačnošću (što i ne čudi, s obzirom na veličinu skupa podataka):
        - Logistička regresija
        - SVM (radi sa svakim kernelom, sačuvan linearni)
        - Naivni Bejz-Gausovski model
        - K-najbližih suseda (Fine KNN)
        - Linearni diskriminativni klasifikator
        - Ansambl metoda (Bagged Trees)

Pregled funkcija:
    addDerivative      - računa izvode selektovanih kolona tabele i dodaje kolone sa izvodima na tabelu.
    bag2table          - Izvlači "/mavros/imu/data", "/mavros/imu/mag", "/mavros/global_position/local"
                        i "/mavros/global_position/compass_hdg" iz ROS bag fajla i pretvara u tabelu
    bag2video          - Izvlači snimke iz ROS bag fajla i čuva kao video sa zadatim parametrima.
    bagCell2table      - Primenjuje bag2table() na bag promenjive iz datog cell niza
                        i objedinjuje rezultate u jednu tabelu.
    bagSplit           - Nekorišćena funkcija za deljenje cell nizova bag promenljivih na trening, CV i test nizove.
    bags2video         - Primenjuje bag2video na sve bag fajlove iz zadatog direktorijuma.
    compassCell2table  - Konvertuje cell niz ROS bag poruka tipa "std_msgs/Float64" u tabelu.
    files2bag          - Učitava sve bag fajlove iz datog direktorijuma u cell niz bag promenjivih.
    getFeatureTable    - Finalno izvlačenje podataka. Primenjuje bag2table() na bag promenjive iz datog cell niza,
                        dodaje izvode na kolone magnetskog polja i smera kompasa, izvlači relevantne kolone i računa varijansu.
    imu2table          - Konvertuje ROS bag poruku tipa "sensor_msgs/Imu" u tabelu.
    imuCell2table      - Primenjuje imu2table() na elemente cell niza poruka tipa "sensor_msgs/Imu" i objedinjuje u tabelu.
    mag2table          - Konvertuje ROS bag poruku tipa "sensor_msgs/MagneticField" u tabelu.
    magCell2table      - Primenjuje mag2table() na elemente cell niza poruka tipa "sensor_msgs/MagneticField" i objedinjuje u tabelu.
    main               - Glavni program.
    odom2table         - Konvertuje ROS bag poruku tipa "nav_msgs/Odometry" u tabelu.
    odomCell2table     - Primenjuje imu2table() na elemente cell niza poruka tipa "nav_msgs/Odometry" i objedinjuje u tabelu.
    plotData           - Prikazuje odabrane kolone iz para tabela kao signale u vremenu i njihove histograme.
                        Koristi se za analizu merenja.
    tableVar           - Računa varijanse kolona tabele i vraća kao novu tabelu sa istim imenima kolona.
    